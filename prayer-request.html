<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Prayer Request — Strategic Prayer Ministries</title>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Playfair+Display:wght@400;600;700&display=swap" rel="stylesheet">

  <!-- Main stylesheet -->
  <link rel="stylesheet" href="css/styles.css" />
  
  <!-- Favicons -->
  <link rel="icon" href="favicon.ico" sizes="any">
  <link rel="icon" type="image/svg+xml" href="favicon.svg">
  <link rel="apple-touch-icon" href="apple-touch-icon.png">
  <link rel="manifest" href="site.webmanifest">
  <meta name="theme-color" content="#0b0d13">

  <!-- SEO -->
  <meta name="description" content="Submit your prayer request to Strategic Prayer Ministries. Let us pray for you and believe God for breakthrough in your situation.">
</head>
<body>

<!-- Scroll Progress Indicator -->
<div class="scroll-progress" id="scrollProgress"></div>

<!-- Interactive Cursor -->
<div class="cursor-glow" id="cursorGlow"></div>

<!-- ===== Navigation ===== -->
<header class="nav" id="navbar">
  <div class="nav__inner container">
    <a class="brand" href="index.html">
      <img src="assets/spm-logo.webp" alt="Strategic Prayer Ministries Logo" class="brand__logo" />
      <span class="brand__name">Strategic Prayer Ministries</span>
    </a>
    <button class="nav__toggle" aria-label="Open menu" aria-expanded="false" aria-controls="navLinks" id="navToggle">
      <span></span><span></span><span></span>
    </button>
    <nav class="nav__links" id="navLinks">
      <div class="nav__dropdown" id="homeDropdown">
        <button class="nav__dropdown-toggle" aria-expanded="false" aria-controls="homeDropdownMenu">Home</button>
        <div class="nav__dropdown-menu" id="homeDropdownMenu">
          <a href="index.html#links">Links</a>
          <a href="index.html#media">Gallery & Videos</a>
        </div>
      </div>
      <a href="about.html">Who We Are</a>
      <a href="giving.html">Giving</a>
      <a href="contact.html">Contact</a>
    </nav>
  </div>
</header>

<!-- ===== Hero Section ===== -->
<section class="hero hero--prayer" style="min-height: 60vh;">
  <div class="hero__bg" id="prayerHeroBg"></div>
  <div class="hero__overlay"></div>
  <div class="hero__content container">
    <h1 class="title">Prayer Request</h1>
    <p class="subtitle">
      Let us stand with you in prayer. Submit your prayer needs and experience the power of united intercession.
    </p>
  </div>
</section>

<!-- ===== Scripture Section ===== -->
<section class="section">
  <div class="container">
    <div style="max-width: 900px; margin: 0 auto; text-align: center;">
      <div style="width: 60px; height: 3px; background: linear-gradient(90deg, transparent, var(--accent-gold), transparent); margin: 0 auto 2rem;"></div>
      <p style="font-family: 'Playfair Display', serif; font-size: clamp(1.2rem, 2.6vw, 1.8rem); line-height: 1.6; color: #eaeaea; margin: 0 0 0.75rem;">
        "Who, in the days of His flesh, when He had offered up prayers and supplications, with vehement cries and tears to Him who was able to save Him from death, and was heard because of His godly fear."
      </p>
      <div style="letter-spacing: 0.35em; color: var(--text-muted); font-weight: 700; font-size: 0.95rem; margin-bottom: 2rem;">
        HEBREWS 5:7
      </div>
      <div style="width: 60px; height: 3px; background: linear-gradient(90deg, transparent, var(--accent-gold), transparent); margin: 0 auto;"></div>
    </div>
  </div>
</section>

<!-- ===== Prayer Request Form ===== -->
<section class="section">
  <div class="container">
    <div style="max-width: 800px; margin: 0 auto;">
      <div style="text-align: center; margin-bottom: 3rem;">
        <h2 style="font-family: 'Playfair Display', serif; font-size: clamp(1.8rem, 4.2vw, 2.6rem); color: var(--text-primary); margin: 1.25rem 0 0.5rem;">
          <span style="color: var(--accent-gold);">Need Prayer?</span>
        </h2>
        <p style="color: var(--text-muted); font-size: clamp(1rem, 2.2vw, 1.15rem); margin: 0 0 2rem; max-width: 52ch; margin-left: auto; margin-right: auto;">
          Let us pray for you. Click below to open the request form.
        </p>
      </div>

      <!-- Prayer Request Button -->
      <div style="text-align: center; margin-bottom: 3rem;">
        <button id="openPrayerForm" class="btn btn--gold" style="min-width: 280px; font-size: 1.1rem; padding: 1.2rem 2rem;">
          Submit Prayer Request
        </button>
      </div>

      <!-- Prayer Request Form Modal -->
      <div id="prayerFormModal" style="display: none; position: fixed; inset: 0; background: rgba(0, 0, 0, 0.8); z-index: 1000; padding: 1rem; overflow-y: auto;">
        <div style="max-width: 900px; margin: 2rem auto; background: var(--panel-bg); border: 1px solid var(--border-color); border-radius: 18px; box-shadow: var(--shadow-xl); position: relative;">
          <!-- Modal Header -->
          <div style="display: flex; align-items: center; justify-content: space-between; padding: 1rem 1.5rem; border-bottom: 1px solid var(--border-color); background: var(--secondary-bg); border-radius: 18px 18px 0 0;">
            <h3 style="font-family: 'Playfair Display', serif; font-size: 1.5rem; color: var(--text-primary); margin: 0;">Prayer Request Form</h3>
            <button id="closePrayerForm" style="background: transparent; border: 2px solid var(--accent-gold); color: var(--text-primary); padding: 0.5rem 1rem; border-radius: 8px; cursor: pointer; font-weight: 600;">
              Close
            </button>
          </div>

          <!-- Modal Body -->
          <div style="padding: 2rem; background: #fff; border-radius: 0 0 18px 18px;">
            <iframe
              id="prayerFormIframe"
              style="width: 100%; height: 80vh; border: 0; border-radius: 8px;"
              title="Prayer Request Form"
              src="https://docs.google.com/forms/d/e/1FAIpQLScCxcwJSMOjbYqUt9y64QCy0TznElxD5UCRWj9N3a7bKRkH4A/viewform?embedded=true"
              loading="lazy">
            </iframe>
          </div>
        </div>
      </div>

    </div>
  </div>
</section>

<!-- ===== Footer ===== -->
<footer class="footer">
  <div class="container">
    <div class="footer-logo-wrapper">
      <a href="index.html">
        <img src="assets/spm-logo.webp" alt="Strategic Prayer Ministries Logo" class="footer-logo" />
      </a>
    </div>
    <div class="footer-container">
      <div>
        <h4>MINISTRY</h4>
        <ul>
          <li><a href="about.html">About Us</a></li>
          <li><a href="giving.html">Giving</a></li>
          <li><a href="prayer-request.html">Prayer Request</a></li>
        </ul>
      </div>
      <div>
        <h4>RESOURCES</h4>
        <ul>
          <li><a href="index.html#media">Gallery</a></li>
          <li><a href="testimonies.html">Videos</a></li>
        </ul>
      </div>
      <div>
        <h4>CONNECT WITH US</h4>
        <div class="social-badges">
          <!-- Email -->
          <a href="mailto:info@strategicprayer.org" class="badge badge--email" aria-label="Email us">
            <svg class="icon" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
              <path d="M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2Zm0 3.2-8 5.2-8-5.2V6l8 5.2L20 6v1.2Z"/>
            </svg>
            <span>EMAIL</span>
          </a>
          <!-- Zoom -->
          <a href="https://us02web.zoom.us/j/4880417404?pwd=a2g2MWIyblpGTkdyQUtybEx2YkpjZz09" class="badge badge--zoom" target="_blank" rel="noopener" aria-label="Join us on Zoom">
            <svg class="icon" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
              <path d="M3.6 5h10.8A2.6 2.6 0 0 1 17 7.6v1.9l3.8-2.8a1 1 0 0 1 1.6.8v9a1 1 0 0 1-1.6.8L17 14.5v1.9A2.6 2.6 0 0 1 14.4 19H3.6A2.6 2.6 0 0 1 1 16.4V7.6A2.6 2.6 0 0 1 3.6 5Z"/>
            </svg>
            <span>ZOOM</span>
          </a>
          <!-- YouTube -->
          <a href="https://www.youtube.com/@yourChannel" class="badge badge--youtube" target="_blank" rel="noopener" aria-label="Watch on YouTube">
            <svg class="icon" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
              <path d="M23.5 6.2a3 3 0 0 0-2.1-2.1C19.5 3.6 12 3.6 12 3.6s-7.5 0-9.4.5A3 3 0 0 0 .5 6.2C0 8.1 0 12 0 12s0 3.9.5 5.8a3 3 0 0 0 2.1 2.1c1.9.5 9.4.5 9.4.5s7.5 0 9.4-.5a3 3 0 0 0 2.1-2.1C24 15.9 24 12 24 12s0-3.9-.5-5.8ZM9.6 15.6V8.4L15.9 12l-6.3 3.6Z"/>
            </svg>
            <span>YOUTUBE</span>
          </a>
        </div>
        <div class="newsletter">
          <h4>Subscribe</h4>
          <form>
            <input type="email" placeholder="Your Email" required />
            <button type="submit">Join</button>
          </form>
        </div>
      </div>
    </div>
    <div class="scripture" id="scripture"></div>
    <div class="footer-bottom">
      <div class="footer-bottom-row">
        <p>© <span id="year"></span> Strategic Prayer Ministries. All rights reserved.</p>
        <div class="footer-links">
          <a href="privacy-policy.html">Privacy Policy</a>
          <span>•</span>
          <a href="terms-conditions.html">Terms & Conditions</a>
        </div>
      </div>
    </div>
  </div>
</footer>

<!-- Toast notification -->
<div class="toast" id="toast" role="status" aria-live="polite" aria-atomic="true"></div>

<!-- ===== JavaScript ===== -->
<script>
  // Navigation functionality
  const navbar = document.getElementById('navbar');
  const navToggle = document.getElementById('navToggle');
  const navLinks = document.getElementById('navLinks');
  const homeDropdown = document.getElementById('homeDropdown');
  const dropdownToggle = homeDropdown?.querySelector('.nav__dropdown-toggle');

  // Navbar scroll effect
  window.addEventListener('scroll', () => {
    navbar?.classList.toggle('scrolled', window.scrollY > 50);
  }, { passive: true });

  // Mobile menu toggle
  navToggle?.addEventListener('click', () => {
    const isActive = navLinks?.classList.toggle('active');
    navToggle.setAttribute('aria-expanded', String(isActive));
  });

  // Dropdown functionality
  dropdownToggle?.addEventListener('click', (e) => {
    e.preventDefault();
    const isActive = homeDropdown.classList.toggle('active');
    dropdownToggle.setAttribute('aria-expanded', String(isActive));
  });

  // Close menus on outside click
  document.addEventListener('click', (e) => {
    if (!navbar.contains(e.target)) {
      navLinks?.classList.remove('active');
      navToggle?.setAttribute('aria-expanded', 'false');
      homeDropdown?.classList.remove('active');
      dropdownToggle?.setAttribute('aria-expanded', 'false');
    }
  });

  // Close menus on escape key
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      navLinks?.classList.remove('active');
      navToggle?.setAttribute('aria-expanded', 'false');
      homeDropdown?.classList.remove('active');
      dropdownToggle?.setAttribute('aria-expanded', 'false');
      // Also close prayer form modal
      document.getElementById('prayerFormModal').style.display = 'none';
      document.body.style.overflow = '';
    }
  });

  // Footer year and scripture rotation
  document.getElementById('year').textContent = new Date().getFullYear();
  const verses = [
    '"Is not my word like as a fire? saith the Lord; and like a hammer that breaketh the rock in pieces?" Jeremiah 23:29',
    '"But they that wait upon the Lord shall renew their strength..." Isaiah 40:31',
    '"The harvest truly is plenteous, but the labourers are few..." Matthew 9:37–38'
  ];
  let verseIndex = 0;
  function showVerse() {
    const el = document.getElementById('scripture');
    if (el) {
      el.textContent = verses[verseIndex];
      verseIndex = (verseIndex + 1) % verses.length;
    }
  }
  showVerse();
  setInterval(showVerse, 8000);

  // Scroll Progress Indicator
  const progressEl = document.getElementById('scrollProgress');
  const updateProgress = () => {
    const scrollTop = window.scrollY || document.documentElement.scrollTop;
    const docHeight = document.documentElement.scrollHeight - window.innerHeight;
    const pct = docHeight > 0 ? (scrollTop / docHeight) * 100 : 0;
    progressEl.style.width = pct + '%';
  };
  window.addEventListener('scroll', updateProgress, { passive: true });
  window.addEventListener('resize', updateProgress);
  updateProgress();

  // Interactive Cursor Glow
  const cursor = document.getElementById('cursorGlow');
  let rafPending = false, targetX = 0, targetY = 0;
  const onMove = (e) => {
    targetX = e.clientX;
    targetY = e.clientY;
    if (!rafPending) {
      rafPending = true;
      requestAnimationFrame(renderCursor);
    }
  };
  function renderCursor() {
    rafPending = false;
    cursor.style.transform = `translate(${targetX - 12}px, ${targetY - 12}px)`;
  }
  window.addEventListener('mousemove', onMove, { passive: true });

  // ===== Enhanced Parallax Effect for Prayer Request =====
  const prayerHero = document.querySelector('.hero--prayer');
  const prayerHeroBg = document.getElementById('prayerHeroBg');
  
  if (prayerHero && prayerHeroBg) {
    const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    
    if (!prefersReduced) {
      let ticking = false;
      
      function updatePrayerParallax() {
        const scrolled = window.pageYOffset;
        const heroHeight = prayerHero.offsetHeight;
        const scrollProgress = Math.min(scrolled / heroHeight, 1);
        
        const parallaxSpeed = 0.4;
        const yPos = scrolled * parallaxSpeed;
        
        const scaleBase = 1.1;
        const scaleMax = scaleBase + 0.1;
        const currentScale = scaleBase + (scrollProgress * (scaleMax - scaleBase));
        
        prayerHeroBg.style.transform = `translate3d(0, ${yPos}px, 0) scale(${currentScale})`;
        
        ticking = false;
      }
      
      function requestTick() {
        if (!ticking) {
          requestAnimationFrame(updatePrayerParallax);
          ticking = true;
        }
      }
      
      updatePrayerParallax();
      window.addEventListener('scroll', requestTick, { passive: true });
      window.addEventListener('resize', updatePrayerParallax);
      
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            window.addEventListener('scroll', requestTick, { passive: true });
          } else {
            window.removeEventListener('scroll', requestTick);
          }
        });
      }, { rootMargin: '10px' });
      
      observer.observe(prayerHero);
    }
  }

  // Prayer Form Modal functionality
  const openBtn = document.getElementById('openPrayerForm');
  const closeBtn = document.getElementById('closePrayerForm');
  const modal = document.getElementById('prayerFormModal');
  const iframe = document.getElementById('prayerFormIframe');

  let loadCount = 0;
  let loadListenerAttached = false;

  function showToast(message, isError = false) {
    const toast = document.getElementById('toast');
    toast.textContent = message;
    toast.className = isError ? 'toast error' : 'toast';
    toast.style.display = 'block';
    setTimeout(() => toast.style.display = 'none', 5000);
  }

  function openPrayerForm() {
    loadCount = 0;
    modal.style.display = 'block';
    document.body.style.overflow = 'hidden';
    
    if (iframe.src.includes('embedded=true')) {
      iframe.src = iframe.src;
    }
    
    if (!loadListenerAttached) {
      iframe.addEventListener('load', () => {
        loadCount++;
        if (loadCount >= 2) {
          showToast('Prayer request submitted successfully! We will pray for you.');
          setTimeout(() => {
            closePrayerForm();
          }, 2000);
        }
      });
      loadListenerAttached = true;
    }
  }

  function closePrayerForm() {
    modal.style.display = 'none';
    document.body.style.overflow = '';
    openBtn.focus();
  }

  openBtn.addEventListener('click', openPrayerForm);
  closeBtn.addEventListener('click', closePrayerForm);

  modal.addEventListener('click', (e) => {
    if (e.target === modal) {
      closePrayerForm();
    }
  });

  console.log('Prayer Request page loaded successfully!');
</script>

</body>
</html>